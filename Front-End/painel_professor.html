<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Painel do Professor</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap");

      body {
        background-image: url(../images/unisc_fundo.jpg);
        background-size: cover;
        font-family: "Roboto Condensed", sans-serif;
        font-weight: 600;
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }

      .container {
        width: 90vw;
        max-width: 1200px;
        background: white;
        border: 6px solid #0044cc;
        border-radius: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .header {
        text-align: center;
        margin-bottom: 20px;
        width: 100%;
      }

      .header img {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        border: 2px solid #ccc;
        cursor: pointer;
        object-fit: cover;
      }

      .header h2 {
        margin: 10px 0 0 0;
        font-size: 24px;
        font-weight: bold;
      }

      .user-role {
        font-size: 16px;
        color: #555;
        margin-bottom: 15px;
      }

      .role-selection {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 20px;
        font-weight: bold;
      }

      .role-selection label {
        display: flex;
        align-items: center;
        gap: 5px;
        cursor: pointer;
      }

      .role-selection input[type="checkbox"] {
        transform: scale(1.2);
        cursor: pointer;
      }

      .tabs {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
        border-bottom: 2px solid #ccc;
        margin-bottom: 20px;
        padding-bottom: 10px;
        width: 100%;
      }

      .tab {
        cursor: pointer;
        font-weight: bold;
        padding: 10px 15px;
        color: #333;
        border-radius: 5px;
        transition: all 0.3s ease;
      }

      .tab.active {
        color: #0044cc;
        border-bottom: 3px solid #0044cc;
        background-color: #e0e8f0;
      }

      .tab-content {
        display: none;
        width: 100%;
        padding: 15px;
        border: 1px solid #eee;
        border-radius: 10px;
        background-color: #f9f9f9;
      }

      .tab-content.active {
        display: block;
      }

      .feature-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .feature-card {
        background-color: #fff;
        border: 1px solid #e0e0e0;
        border-radius: 10px;
        padding: 15px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        text-align: center;
        transition: transform 0.2s ease-in-out;
        cursor: pointer;
      }

      .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
      }

      .feature-card i {
        font-size: 30px;
        margin-bottom: 10px;
        color: #0044cc;
      }

      .feature-card h3 {
        font-size: 18px;
        margin: 0;
        color: #333;
      }

      .coordenador-only {
        border: 2px dashed #ff9800;
        background-color: #fff8e1;
      }

      .coordenador-only h3 {
        color: #f57c00;
      }

      .form-section {
        margin-bottom: 20px;
      }

      .form-section label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: #555;
      }

      .form-section input[type="text"],
      .form-section input[type="date"],
      .form-section input[type="number"],
      .form-section textarea,
      .form-section select {
        width: calc(100% - 20px);
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        margin-bottom: 10px;
      }

      .form-section button {
        background-color: #0044cc;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s ease;
      }

      .form-section button:hover {
        background-color: #003399;
      }

      .upload-section {
        text-align: center;
        padding: 20px;
        border: 2px dashed #ccc;
        border-radius: 10px;
        margin-top: 15px;
      }

      .upload-section input[type="file"] {
        margin-top: 10px;
      }

      .alert-item {
        background-color: #fff3e0;
        border-left: 5px solid #f57c00;
        padding: 10px;
        margin-bottom: 10px;
        border-radius: 5px;
      }

      .alert-item strong {
        color: #e65100;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <label for="fotoInput">
          <img
            id="fotoUsuario"
            src="https://via.placeholder.com/80"
            alt="Foto do Usuário"
          />
        </label>
        <input
          type="file"
          id="fotoInput"
          accept="image/*"
          style="display: none"
        />
        <h2 id="nomeHeader">Nome do Professor</h2>
        <div class="user-role">Professor</div>
      </div>

      <div class="role-selection">
        <label>
          <input type="checkbox" id="checkboxCoordenador" /> Tornar Coordenador
        </label>
      </div>

      <div class="tabs">
        <div class="tab active" onclick="showTab('gerenciar_alunos')">
          Gerenciar Alunos
        </div>
        <div class="tab" onclick="showTab('gerenciar_professores')">
          Gerenciar Professores
        </div>
        <div class="tab" onclick="showTab('relatorios_notas')">
          Notas e Avaliações
        </div>
        <div class="tab" onclick="showTab('cronograma')">Cronograma</div>
        <div class="tab" onclick="showTab('reunioes')">Reuniões</div>
        <div class="tab" onclick="showTab('prazos_alertas')">
          Prazos e Alertas
        </div>
      </div>

      <div id="gerenciar_alunos" class="tab-content active">
        <h3>Cadastro de Alunos Matriculados no TC</h3>
        <div class="form-section">
          <label for="nomeAlunoMatriculado">Nome do Aluno:</label>
          <input
            type="text"
            id="nomeAlunoMatriculado"
            placeholder="Nome completo do aluno"
          />
          <label for="matriculaAluno">Matrícula:</label>
          <input
            type="text"
            id="matriculaAluno"
            placeholder="Número de matrícula"
          />
          <button onclick="cadastrarAluno()">Cadastrar Aluno</button>
        </div>
        <h4>Alunos Matriculados:</h4>
        <ul id="listaAlunosMatriculados"></ul>
        <div class="form-section">
          <label for="alunoSelecionado">Definir Aluno:</label>
          <select id="alunoSelecionado">
            <option value="">Selecione um aluno</option>
          </select>
          <label for="orientadorSelecionado">Orientador:</label>
          <select id="orientadorSelecionado">
            <option value="">Selecione um professor</option>
          </select>
          <button onclick="definirOrientador()">
            Definir Relação Aluno/Orientador
          </button>
        </div>
      </div>

      <div id="gerenciar_professores" class="tab-content">
        <h3>Cadastro de Professores</h3>
        <div class="form-section">
          <label for="nomeProfessor">Nome do Professor:</label>
          <input
            type="text"
            id="nomeProfessor"
            placeholder="Nome completo do professor"
          />
          <label for="disciplinaProfessor">Disciplina:</label>
          <input
            type="text"
            id="disciplinaProfessor"
            placeholder="Disciplina principal"
          />
          <button onclick="cadastrarProfessor()">Cadastrar Professor</button>
        </div>
        <h4>Professores Cadastrados:</h4>
        <ul id="listaProfessores"></ul>
      </div>

      <div id="relatorios_notas" class="tab-content">
        <h3>Lançamento de Notas por Critério</h3>
        <div class="form-section">
          <label for="alunoParaNota">Aluno:</label>
          <select id="alunoParaNota">
            <option value="">Selecione um aluno</option>
          </select>
          <label for="criterioNota">Critério de Avaliação:</label>
          <select id="criterioNota">
            <option value="proposta">Proposta</option>
            <option value="reelaboracao_proposta">Reelaboração Proposta</option>
            <option value="tc">Trabalho de Conclusão (TC)</option>
            <option value="reelaboracao_tc">Reelaboração de TC</option>
          </select>
          <div id="notasPorCriterio"></div>
          <button onclick="lancarNotas()">Lançar Notas</button>
        </div>

        <h3 class="coordenador-only">
          Definição de Banca Examinadora (Coordenador)
        </h3>
        <div class="form-section coordenador-only">
          <label for="alunoParaBanca">Aluno:</label>
          <select id="alunoParaBanca">
            <option value="">Selecione um aluno</option>
          </select>
          <label for="professorBanca1">Professor da Banca 1:</label>
          <select id="professorBanca1">
            <option value="">Selecione um professor</option>
          </select>
          <label for="professorBanca2">Professor da Banca 2:</label>
          <select id="professorBanca2">
            <option value="">Selecione um professor</option>
          </select>
          <button onclick="definirBanca()">Definir Banca</button>
        </div>
      </div>

      <div id="cronograma" class="tab-content">
        <h3 class="coordenador-only">
          Definição do Cronograma de Entregas (Coordenador)
        </h3>
        <div class="form-section coordenador-only">
          <label for="tipoEntregaCronograma">Tipo de Entrega:</label>
          <select id="tipoEntregaCronograma">
            <option value="proposta">Proposta</option>
            <option value="reelaboracao_proposta">Reelaboração Proposta</option>
            <option value="tc">Trabalho de Conclusão (TC)</option>
            <option value="reelaboracao_tc">Reelaboração de TC</option>
          </select>
          <label for="dataEntregaCronograma">Data de Entrega:</label>
          <input type="date" id="dataEntregaCronograma" />
          <label for="horaEntregaCronograma">Horário de Entrega:</label>
          <input type="time" id="horaEntregaCronograma" />
          <button onclick="definirCronograma()">Definir Prazo</button>
        </div>
      </div>

      <div id="reunioes" class="tab-content">
        <h3>Registro de Reuniões de Orientação</h3>
        <div class="form-section">
          <label for="alunoReuniao">Aluno:</label>
          <select id="alunoReuniao">
            <option value="">Selecione um aluno</option>
          </select>
          <label for="dataReuniao">Data da Reunião:</label>
          <input type="date" id="dataReuniao" />
          <label for="observacoesReuniao">Observações:</label>
          <textarea
            id="observacoesReuniao"
            rows="4"
            placeholder="Detalhes da reunião..."
          ></textarea>
          <div class="upload-section">
            <label for="documentoReuniao">Upload de Documentos:</label>
            <input type="file" id="documentoReuniao" />
            <button onclick="registrarReuniao()">Registrar Reunião</button>
          </div>
        </div>
        <h4>Reuniões Registradas:</h4>
        <ul id="listaReunioes"></ul>
      </div>

      <div id="prazos_alertas" class="tab-content">
        <h3>Controle de Prazos e Tempos de Avaliação</h3>
        <div class="form-section">
          <p><strong>Prazos de Entrega Definidos:</strong></p>
          <ul id="listaPrazosEntrega"></ul>
        </div>
        <div class="form-section">
          <p><strong>Tempos de Avaliação Definidos:</strong></p>
          <ul id="listaTemposAvaliacao"></ul>
        </div>
        <div class="form-section">
          <h3>Alertas de Atraso</h3>
          <div id="alertasAtraso">
            <p class="alert-item">
              <strong>Atenção:</strong> O aluno [Nome do Aluno] está com a
              entrega da Proposta atrasada.
            </p>
            <p class="alert-item">
              <strong>Atenção:</strong> O prazo para avaliação da Reelaboração
              de TC do aluno [Nome do Aluno] expirou.
            </p>
          </div>
        </div>
      </div>
    </div>

    <script>
      function showTab(tabId) {
        document
          .querySelectorAll(".tab-content")
          .forEach((tab) => tab.classList.remove("active"));
        document
          .querySelectorAll(".tab")
          .forEach((tab) => tab.classList.remove("active"));
        document.getElementById(tabId).classList.add("active");
        event.target.classList.add("active");
        toggleCoordenadorFeatures();
      }

      const fotoInput = document.getElementById("fotoInput");
      const fotoUsuario = document.getElementById("fotoUsuario");
      fotoInput.addEventListener("change", function () {
        const file = this.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function (e) {
            fotoUsuario.src = e.target.result;
          };
          reader.readAsDataURL(file);
        }
      });

      const usuarioLogado = JSON.parse(localStorage.getItem("usuarioLogado"));

      document.addEventListener("DOMContentLoaded", () => {
        if (!usuarioLogado) {
          alert("Usuário não logado!");
          window.location.href = "login.html";
          return;
        }

        document.getElementById("nomeHeader").textContent = usuarioLogado.nome;
        if (usuarioLogado.foto) {
          document.getElementById("fotoUsuario").src = usuarioLogado.foto;
        }

        if (
          usuarioLogado.tipo === "coordenador" ||
          usuarioLogado.eh_coordenador
        ) {
          document.getElementById("checkboxCoordenador").checked = true;
          document.querySelector(".user-role").textContent = "Coordenador";
        }

        loadProfessorFeatures();
        toggleCoordenadorFeatures();
        loadDataForTabs();
      });

      function toggleCoordenadorFeatures() {
        const isCoordenador =
          document.getElementById("checkboxCoordenador").checked ||
          (usuarioLogado && usuarioLogado.tipo === "coordenador");
        document.querySelectorAll(".coordenador-only").forEach((el) => {
          el.style.display = isCoordenador ? "block" : "none";
        });
        if (isCoordenador) {
          document.querySelector(".user-role").textContent = "Coordenador";
        } else {
          document.querySelector(".user-role").textContent = "Professor";
        }
      }

      document
        .getElementById("checkboxCoordenador")
        .addEventListener("change", function () {
          toggleCoordenadorFeatures();
          alert(
            `Status de Coordenador ${
              this.checked ? "ativado" : "desativado"
            } para o usuário ${usuarioLogado.nome}.`
          );
        });
      




      async function cadastrarAluno() {
        const nome = document.getElementById("nomeAlunoMatriculado").value;
        const matricula = document.getElementById("matriculaAluno").value;

        //PEDE Uma senha ou gera uma pra evitar bugs e deixar mais simpels tmb
        const senha = prompt("Digite uma senha para o novo aluno:", "123456");

        if (!nome || !matricula || !senha) {
          alert(
            "Por favor, preencha o nome, a matrícula e a senha do aluno."
          );
          return;
        }

        try {
          const response = await fetch("http://localhost:3000/api/alunos", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ nome, matricula, senha }),
          });

          const result = await response.json();

          if (response.ok) {
            alert(result.message);
            document.getElementById("nomeAlunoMatriculado").value = "";
            document.getElementById("matriculaAluno").value = "";
            loadAlunosMatriculados(); // Recarrega a lista de alunos
            loadAlunosForSelect(); // Recarrega os selects
          } else {
            alert(`Erro: ${result.error}`);
          }
        } catch (error) {
          console.error("Erro ao cadastrar aluno:", error);
          alert("Não foi possível conectar ao servidor.");
        }
      }


      //DEIXEI UMA COPIA DA FUNÇÃO ORIGINAL
      /*function cadastrarAluno() {
        const nome = document.getElementById("nomeAlunoMatriculado").value;
        const matricula = document.getElementById("matriculaAluno").value;
        if (nome && matricula) {
          console.log("Cadastrando aluno:", nome, matricula);
          alert("Aluno cadastrado com sucesso!");
          document.getElementById("nomeAlunoMatriculado").value = "";
          document.getElementById("matriculaAluno").value = "";
          loadAlunosMatriculados();
        } else {
          alert("Por favor, preencha o nome e a matrícula do aluno.");
        }
      }*/

      function definirOrientador() {
        const alunoId = document.getElementById("alunoSelecionado").value;
        const orientadorId = document.getElementById(
          "orientadorSelecionado"
        ).value;
        if (alunoId && orientadorId) {
          console.log(
            `Definindo orientador ${orientadorId} para o aluno ${alunoId}`
          );
          alert("Relação Aluno/Orientador definida com sucesso!");
        } else {
          alert("Por favor, selecione um aluno e um orientador.");
        }
      }


      async function cadastrarProfessor() {
        const nome = document.getElementById("nomeProfessor").value;
        const disciplina = document.getElementById("disciplinaProfessor").value;
        const senha = prompt("Digite uma senha para o novo professor:", "123456");


        if (!nome || !disciplina || !senha) {
          alert("Por favor, preencha o nome, a disciplina e a senha do professor.");
          return;
        }

        try {
          const response = await fetch("http://localhost:3000/api/professores", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ nome, disciplina, senha }),
          });

          const result = await response.json();

          if (response.ok) {
            alert(result.message);
            document.getElementById("nomeProfessor").value = "";
            document.getElementById("disciplinaProfessor").value = "";
            loadProfessores(); // Recarrega a lista de professores
            loadProfessoresForSelect(); // Recarrega os selects
          } else {
            alert(`Erro: ${result.error}`);
          }
        } catch (error) {
          console.error("Erro ao cadastrar professor:", error);
          alert("Não foi possível conectar ao servidor.");
        }
      }

      /*function cadastrarProfessor() {
        const nome = document.getElementById("nomeProfessor").value;
        const disciplina = document.getElementById("disciplinaProfessor").value;
        if (nome && disciplina) {
          console.log("Cadastrando professor:", nome, disciplina);
          alert("Professor cadastrado com sucesso!");
          document.getElementById("nomeProfessor").value = "";
          document.getElementById("disciplinaProfessor").value = "";
          loadProfessores();
        } else {
          alert("Por favor, preencha o nome e a disciplina do professor.");
        }
      }*/

      function lancarNotas() {
        const alunoId = document.getElementById("alunoParaNota").value;
        const criterio = document.getElementById("criterioNota").value;

        console.log(
          `Lançando notas para aluno ${alunoId}, critério ${criterio}`
        );

        alert("Notas lançadas com sucesso!");
      }

      function definirBanca() {
        const alunoId = document.getElementById("alunoParaBanca").value;
        const professor1Id = document.getElementById("professorBanca1").value;
        const professor2Id = document.getElementById("professorBanca2").value;
        if (alunoId && professor1Id && professor2Id) {
          console.log(
            `Definindo banca para ${alunoId} com ${professor1Id} e ${professor2Id}`
          );

          alert("Banca definida com sucesso!");
        } else {
          alert("Por favor, selecione o aluno e os dois professores da banca.");
        }
      }

      function definirCronograma() {
        const tipoEntrega = document.getElementById(
          "tipoEntregaCronograma"
        ).value;
        const dataEntrega = document.getElementById(
          "dataEntregaCronograma"
        ).value;
        const horaEntrega = document.getElementById(
          "horaEntregaCronograma"
        ).value;
        if (tipoEntrega && dataEntrega && horaEntrega) {
          console.log(
            `Definindo cronograma: ${tipoEntrega} para ${dataEntrega} às ${horaEntrega}`
          );

          alert("Prazo de entrega definido com sucesso!");
        } else {
          alert("Por favor, preencha todos os campos do cronograma.");
        }
      }

      function registrarReuniao() {
        const alunoId = document.getElementById("alunoReuniao").value;
        const dataReuniao = document.getElementById("dataReuniao").value;
        const observacoes = document.getElementById("observacoesReuniao").value;
        const documento = document.getElementById("documentoReuniao").files[0];

        if (alunoId && dataReuniao) {
          console.log(
            "Registrando reunião:",
            alunoId,
            dataReuniao,
            observacoes,
            documento
          );

          alert("Reunião registrada com sucesso!");

          document.getElementById("alunoReuniao").value = "";
          document.getElementById("dataReuniao").value = "";
          document.getElementById("observacoesReuniao").value = "";
          document.getElementById("documentoReuniao").value = "";
          loadReunioes();
        } else {
          alert("Por favor, selecione um aluno e a data da reunião.");
        }
      }

      function loadProfessorFeatures() {
        console.log("Carregando funcionalidades específicas do professor...");

        loadProfessoresForSelect();
        loadAlunosForSelect();
      }

      function loadDataForTabs() {
        loadAlunosMatriculados();
        loadProfessores();
        loadPrazosAlertas();
        loadReunioes();
        generateNotasPorCriterioInputs();
      }


      async function loadAlunosMatriculados() {
        const listaAlunosEl = document.getElementById("listaAlunosMatriculados");
        listaAlunosEl.innerHTML = "<li>Carregando...</li>";

        try {
          const response = await fetch("http://localhost:3000/api/alunos");
          const alunos = await response.json();

          listaAlunosEl.innerHTML = ""; // Limpa a lista
          if (alunos.length === 0) {
            listaAlunosEl.innerHTML = "<li>Nenhum aluno cadastrado.</li>";
            return;
          }

          alunos.forEach((aluno) => {
            const li = document.createElement("li");
            // Ajuste para usar 'cpf' como matrícula, conforme definido no backend
            li.textContent = `${aluno.nome} (Matrícula: ${aluno.cpf})`;
            listaAlunosEl.appendChild(li);
          });
        } catch (error) {
          console.error("Erro ao buscar alunos:", error);
          listaAlunosEl.innerHTML = "<li>Erro ao carregar alunos.</li>";
        }
      }
      /*
      function loadAlunosMatriculados() {
        const listaAlunosEl = document.getElementById(
          "listaAlunosMatriculados"
        );
        listaAlunosEl.innerHTML = "";
        console.log("Buscando alunos matriculados...");

        const alunosExemplo = [
          { id: 1, nome: "Aluno 1", matricula: "num matricula 1" },
          { id: 2, nome: "Aluno 2", matricula: "num matricula 2" },
        ];
        alunosExemplo.forEach((aluno) => {
          const li = document.createElement("li");
          li.textContent = `${aluno.nome} (Matrícula: ${aluno.matricula})`;
          listaAlunosEl.appendChild(li);
        });
      }*/
      
      async function loadAlunosForSelect() {
        const selects = [
          document.getElementById("alunoSelecionado"),
          document.getElementById("alunoParaNota"),
          document.getElementById("alunoParaBanca"),
          document.getElementById("alunoReuniao"),
        ];

        try {
          const response = await fetch("http://localhost:3000/api/alunos");
          const alunos = await response.json();

          selects.forEach(select => {
            select.innerHTML = '<option value="">Selecione um aluno</option>'; // Limpa e adiciona a opção padrão
            alunos.forEach((aluno) => {
              const option = document.createElement("option");
              option.value = aluno.id;
              option.textContent = aluno.nome;
              select.appendChild(option);
            });
          });
        } catch (error) {
          console.error("Erro ao buscar alunos para os selects:", error);
        }
      }
      /*
      function loadAlunosForSelect() {
        const selectAluno = document.getElementById("alunoSelecionado");
        const selectAlunoNota = document.getElementById("alunoParaNota");
        const selectAlunoBanca = document.getElementById("alunoParaBanca");
        const selectAlunoReuniao = document.getElementById("alunoReuniao");
        console.log("Buscando alunos para selects...");

        const alunosExemplo = [
          { id: 1, nome: "Aluno 1" },
          { id: 2, nome: "Aluno 2" },
          { id: 3, nome: "Aluno 3" },
        ];
        alunosExemplo.forEach((aluno) => {
          const option = document.createElement("option");
          option.value = aluno.id;
          option.textContent = aluno.nome;
          selectAluno.appendChild(option);
          selectAlunoNota.appendChild(option.cloneNode(true));
          selectAlunoBanca.appendChild(option.cloneNode(true));
          selectAlunoReuniao.appendChild(option.cloneNode(true));
        });
      }
        */

      async function loadProfessores() {
        const listaProfessoresEl = document.getElementById("listaProfessores");
        listaProfessoresEl.innerHTML = "<li>Carregando...</li>";

        try {
          const response = await fetch("http://localhost:3000/api/professores");
          const professores = await response.json();
          
          listaProfessoresEl.innerHTML = ""; // Limpa a lista
          if (professores.length === 0) {
              listaProfessoresEl.innerHTML = "<li>Nenhum professor cadastrado.</li>";
              return;
          }

          professores.forEach((prof) => {
            const li = document.createElement("li");
            // Adapte caso adicione o campo 'disciplina' ao retorno da API
            li.textContent = `${prof.nome}`;
            listaProfessoresEl.appendChild(li);
          });
        } catch (error) {
            console.error("Erro ao buscar professores:", error);
            listaProfessoresEl.innerHTML = "<li>Erro ao carregar professores.</li>";
        }
      }
      /*
      function loadProfessores() {
        const listaProfessoresEl = document.getElementById("listaProfessores");
        listaProfessoresEl.innerHTML = "";
        console.log("Buscando professores cadastrados...");

        const professoresExemplo = [
          { id: 101, nome: "Prof. 1", disciplina: "Curso" },
          { id: 102, nome: "Prof. 2", disciplina: "Curso" },
        ];
        professoresExemplo.forEach((prof) => {
          const li = document.createElement("li");
          li.textContent = `${prof.nome} (Disciplina: ${prof.disciplina})`;
          listaProfessoresEl.appendChild(li);
        });
      }
        */

      async function loadProfessoresForSelect() {
        const selects = [
          document.getElementById("orientadorSelecionado"),
          document.getElementById("professorBanca1"),
          document.getElementById("professorBanca2"),
        ];

        try {
            const response = await fetch("http://localhost:3000/api/professores");
            const professores = await response.json();

            selects.forEach(select => {
                select.innerHTML = '<option value="">Selecione um professor</option>'; // Limpa e adiciona a opção padrão
                professores.forEach((prof) => {
                    const option = document.createElement("option");
                    option.value = prof.id;
                    option.textContent = prof.nome;
                    select.appendChild(option);
                });
            });
        } catch (error) {
            console.error("Erro ao buscar professores para os selects:", error);
        }
      }
      /*
      function loadProfessoresForSelect() {
        const selectOrientador = document.getElementById(
          "orientadorSelecionado"
        );
        const selectBanca1 = document.getElementById("professorBanca1");
        const selectBanca2 = document.getElementById("professorBanca2");
        console.log("Buscando professores para selects...");

        const professoresExemplo = [
          { id: 101, nome: "Prof. 1" },
          { id: 102, nome: "Prof. 2" },
          { id: 103, nome: "Prof. 3" },
        ];
        professoresExemplo.forEach((prof) => {
          const option = document.createElement("option");
          option.value = prof.id;
          option.textContent = prof.nome;
          selectOrientador.appendChild(option);
          selectBanca1.appendChild(option.cloneNode(true));
          selectBanca2.appendChild(option.cloneNode(true));
        });
      }
        */

      function generateNotasPorCriterioInputs() {
        const container = document.getElementById("notasPorCriterio");
        const criterio = document.getElementById("criterioNota").value;

        container.innerHTML = "";

        let campos = [];
        switch (criterio) {
          case "proposta":
            campos = ["Qualidade da Proposta", "Originalidade", "Clareza"];
            break;
          case "reelaboracao_proposta":
            campos = [
              "Atendimento às Correções",
              "Melhoria Geral",
              "Profundidade",
            ];
            break;
          case "tc":
            campos = [
              "Conteúdo Técnico",
              "Estrutura do Trabalho",
              "Resultados",
            ];
            break;
          case "reelaboracao_tc":
            campos = [
              "Correções Implementadas",
              "Qualidade da Apresentação",
              "Conclusões",
            ];
            break;
        }

        campos.forEach((campo) => {
          const div = document.createElement("div");
          div.innerHTML = `
                    <label for="${campo
                      .toLowerCase()
                      .replace(/\s+/g, "_")}">${campo}:</label>
                    <input type="number" id="${campo
                      .toLowerCase()
                      .replace(
                        /\s+/g,
                        "_"
                      )}" min="0" max="10" step="0.5" placeholder="Nota (0-10)">
                `;
          container.appendChild(div);
        });
      }

      document
        .getElementById("criterioNota")
        .addEventListener("change", generateNotasPorCriterioInputs);

      function loadPrazosAlertas() {
        const listaPrazosEl = document.getElementById("listaPrazosEntrega");
        const listaTemposEl = document.getElementById("listaTemposAvaliacao");
        console.log("Buscando prazos e tempos...");

        const prazos = [
          { tipo: "Proposta", prazo: "2024-10-15" },
          { tipo: "TC", prazo: "2024-12-01" },
        ];
        const tempos = [
          { tipo: "Avaliação Proposta", tempo: "5 dias úteis" },
          { tipo: "Avaliação TC", tempo: "7 dias úteis" },
        ];

        prazos.forEach((item) => {
          const li = document.createElement("li");
          li.textContent = `${item.tipo}: ${item.prazo}`;
          listaPrazosEl.appendChild(li);
        });
        tempos.forEach((item) => {
          const li = document.createElement("li");
          li.textContent = `${item.tipo}: ${item.tempo}`;
          listaTemposEl.appendChild(li);
        });
      }

      function loadReunioes() {
        const listaReunioesEl = document.getElementById("listaReunioes");
        listaReunioesEl.innerHTML = "";
        console.log("Buscando reuniões registradas...");

        const reunioesExemplo = [
          {
            id: 501,
            aluno: "Ana Silva",
            data: "2024-09-10",
            observacoes: "Discussão sobre a introdução.",
            documento: "doc_ana_1009.pdf",
          },
          {
            id: 502,
            aluno: "Bruno Costa",
            data: "2024-09-12",
            observacoes: "Feedback sobre a metodologia.",
            documento: null,
          },
        ];
        reunioesExemplo.forEach((reuniao) => {
          const li = document.createElement("li");
          li.innerHTML = `
                    <strong>Aluno:</strong> ${
                      reuniao.aluno
                    }, <strong>Data:</strong> ${reuniao.data}<br>
                    <strong>Observações:</strong> ${
                      reuniao.observacoes || "Nenhuma"
                    }<br>
                    ${
                      reuniao.documento
                        ? `<strong>Documento:</strong> <a href="#">${reuniao.documento}</a>`
                        : ""
                    }
                `;
          listaReunioesEl.appendChild(li);
        });
      }

      function loadInitialData() {
        loadProfessorFeatures();
        toggleCoordenadorFeatures();
        loadDataForTabs();
      }

      document.addEventListener("DOMContentLoaded", loadInitialData);
    </script>
  </body>
</html>
